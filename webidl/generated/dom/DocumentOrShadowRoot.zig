// Auto-generated by webidl-codegen
// DO NOT EDIT - changes will be overwritten
//
// This file was generated from the source file with the same name.
// Class definitions have been enhanced with:
//   - Inherited methods from parent classes
//   - Property getters and setters
//   - Optimized field layouts

//! DocumentOrShadowRoot mixin per WHATWG DOM Standard
//! Spec: https://dom.spec.whatwg.org/#documentorshadowroot

const std = @import("std");
const webidl = @import("webidl");
/// DOM ยง4.4 - DocumentOrShadowRoot mixin
/// 
/// This mixin defines APIs shared between Document and ShadowRoot.
/// It's expected to be used by other standards as well.
pub const DocumentOrShadowRoot = struct {
    // ========================================================================
    // DocumentOrShadowRoot fields
    // ========================================================================
    /// Custom element registry for this document or shadow root
    /// TODO: Implement when CustomElementRegistry is available
    custom_element_registry: ?*anyopaque = null,

    // ========================================================================
    // DocumentOrShadowRoot methods
    // ========================================================================

    /// Set the custom element registry
    pub fn setCustomElementRegistry(self: *@This(), registry: ?*anyopaque) void {
        self.custom_element_registry = registry;
    }

    // WebIDL extended attributes metadata
    pub const __webidl__ = .{
        .name = "DocumentOrShadowRoot",
        .kind = .mixin,
        .exposed = null,
        .transferable = false,
        .serializable = false,
        .secure_context = false,
        .cross_origin_isolated = false,
    };
};


// Tests

test "DocumentOrShadowRoot - initial state" {
    const TestDocOrShadow = struct {
        doc_or_shadow: DocumentOrShadowRoot = .{},
    };

    var obj = TestDocOrShadow{};

    try std.testing.expectEqual(@as(?*anyopaque, null), obj.doc_or_shadow.get_customElementRegistry());
}

test "DocumentOrShadowRoot - set registry" {
    const TestDocOrShadow = struct {
        doc_or_shadow: DocumentOrShadowRoot = .{},
    };

    var obj = TestDocOrShadow{};
    var mock_registry: u32 = 42;

    obj.doc_or_shadow.setCustomElementRegistry(@ptrCast(&mock_registry));
    try std.testing.expect(obj.doc_or_shadow.get_customElementRegistry() != null);
    try std.testing.expect(obj.doc_or_shadow.getCustomElementRegistry() != null);
}
